!function(e){"use strict";var i={pips:function(i){var l,s,a,t,n,r=this,o="",p=r._valueMin(),d=(r._valueMax()-p)/r.options.step,u=r.element.find(".ui-slider-handle"),f={first:"label",last:"label",rest:"pip",labels:!1,prefix:"",suffix:"",step:d>100?Math.floor(.05*d):1,formatLabel:function(e){return this.prefix+e+this.suffix}};if("object"===e.type(i)||"undefined"===e.type(i)){e.extend(f,i),r.element.data("pips-options",f),r.options.pipStep=Math.round(f.step),r.element.off(".selectPip").addClass("ui-slider-pips").find(".ui-slider-pip").remove();var c={single:function(i){this.resetClasses(),n.filter(".ui-slider-pip-"+this.classLabel(i)).addClass("ui-slider-pip-selected"),r.options.range&&n.each(function(l,s){var a=e(s).children(".ui-slider-label").data("value");("min"===r.options.range&&a<i||"max"===r.options.range&&a>i)&&e(s).addClass("ui-slider-pip-inrange")})},range:function(i){for(this.resetClasses(),l=0;l<i.length;l++)n.filter(".ui-slider-pip-"+this.classLabel(i[l])).addClass("ui-slider-pip-selected-"+(l+1));r.options.range&&n.each(function(l,s){var a=e(s).children(".ui-slider-label").data("value");a>i[0]&&a<i[1]&&e(s).addClass("ui-slider-pip-inrange")})},classLabel:function(e){return e.toString().replace(".","-")},resetClasses:function(){var e=/(^|\s*)(ui-slider-pip-selected|ui-slider-pip-inrange)(-{1,2}\d+|\s|$)/gi;n.removeClass(function(i,l){return(l.match(e)||[]).join(" ")})}};for(o+=h("first"),a=1;a<d;a++)a%r.options.pipStep==0&&(o+=h(a));for(o+=h("last"),r.element.append(o),n=r.element.find(".ui-slider-pip"),t=e._data(r.element.get(0),"events").mousedown&&e._data(r.element.get(0),"events").mousedown.length?e._data(r.element.get(0),"events").mousedown:r.element.data("mousedown-handlers"),r.element.data("mousedown-handlers",t.slice()),s=0;s<t.length;s++)"slider"===t[s].namespace&&r.element.data("mousedown-original",t[s].handler);r.element.off("mousedown.slider").on("mousedown.selectPip",function(i){var l=e(i.target),s=v(l.data("value")),a=u.eq(s);(a.addClass("ui-state-active"),l.is(".ui-slider-label"))?(!function(i,l){if(!r.option("disabled")){var s=e(i).data("value"),a=v(s);r.values()&&r.values().length?r.options.values[a]=r._trimAlignValue(s):r.options.value=r._trimAlignValue(s),r._refreshValue(),r._change(l,a)}}(l,i),r.element.one("mouseup.selectPip",function(){a.removeClass("ui-state-active").focus()})):r.element.data("mousedown-original")(i)}),r.element.on("slide.selectPip slidechange.selectPip",function(i,l){var s=e(this),a=s.slider("value"),t=s.slider("values");l&&(a=l.value,t=l.values),r.values()&&r.values().length?c.range(t):c.single(a)})}else"destroy"===i?r.element.off(".selectPip").on("mousedown.slider",r.element.data("mousedown-original")).removeClass("ui-slider-pips").find(".ui-slider-pip").remove():"refresh"===i&&r.element.slider("pips",r.element.data("pips-options"));function v(i){var l,s,a,t,n,o=[],p=0;if(r.values()&&r.values().length){for(a=r.values(),t=e.map(a,function(e){return Math.abs(e-i)}),n=Math.min.apply(Math,t),l=0;l<t.length;l++)t[l]===n&&o.push(l);for(p=o[0],s=0;s<o.length;s++)r._lastChangedValue===o[s]&&(p=o[s]);r.options.range&&2===o.length&&(i>a[1]?p=o[1]:i<a[0]&&(p=o[0]))}return p}function h(i){var s,a,t=i,n="ui-slider-pip",o=r.value(),u=r.values();"first"===i?t=0:"last"===i&&(t=d);var c=p+r.options.step*t,v=c.toString().replace(".","-");if(s="array"===e.type(f.labels)?f.labels[t]||"":"object"===e.type(f.labels)?"first"===i?f.labels.first||"":"last"===i?f.labels.last||"":"array"===e.type(f.labels.rest)?f.labels.rest[t-1]||"":c:c,"first"===i?(a="0%",n+=" ui-slider-pip-first",n+="label"===f.first?" ui-slider-pip-label":"",n+=!1===f.first?" ui-slider-pip-hide":""):"last"===i?(a="100%",n+=" ui-slider-pip-last",n+="label"===f.last?" ui-slider-pip-label":"",n+=!1===f.last?" ui-slider-pip-hide":""):(a=(100/d*i).toFixed(4)+"%",n+="label"===f.rest?" ui-slider-pip-label":"",n+=!1===f.rest?" ui-slider-pip-hide":""),n+=" ui-slider-pip-"+v,u&&u.length){for(l=0;l<u.length;l++)c===u[l]&&(n+=" ui-slider-pip-initial-"+(l+1),n+=" ui-slider-pip-selected-"+(l+1));r.options.range&&c>u[0]&&c<u[1]&&(n+=" ui-slider-pip-inrange")}else c===o&&(n+=" ui-slider-pip-initial",n+=" ui-slider-pip-selected"),r.options.range&&("min"===r.options.range&&c<o||"max"===r.options.range&&c>o)&&(n+=" ui-slider-pip-inrange");return'<span class="'+n+'" style="'+("horizontal"===r.options.orientation?"left: "+a:"bottom: "+a)+'"><span class="ui-slider-line"></span><span class="ui-slider-label" data-value="'+c+'">'+f.formatLabel(s)+"</span></span>"}},float:function(i){var l,s=this,a=s._valueMin(),t=s._valueMax(),n=s._value(),r=s._values(),o=[],p=s.element.find(".ui-slider-handle"),d={handle:!0,pips:!1,labels:!1,prefix:"",suffix:"",event:"slidechange slide",formatLabel:function(e){return this.prefix+e+this.suffix}};if("object"===e.type(i)||"undefined"===e.type(i)){if(e.extend(d,i),s.element.data("float-options",d),n<a&&(n=a),n>t&&(n=t),r&&r.length)for(l=0;l<r.length;l++)r[l]<a&&(r[l]=a),r[l]>t&&(r[l]=t);if(s.element.addClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove(),d.handle)for(o=s.values()&&s.values().length?u(r):u([n]),l=0;l<o.length;l++)p.eq(l).append(e('<span class="ui-slider-tip">'+d.formatLabel(o[l])+"</span>"));d.pips&&s.element.find(".ui-slider-label").each(function(i,l){var s,a=e(l),t=[a.data("value")];s=d.formatLabel(u(t)[0]),e('<span class="ui-slider-tip-label">'+s+"</span>").insertAfter(a)}),"slide"!==d.event&&"slidechange"!==d.event&&"slide slidechange"!==d.event&&"slidechange slide"!==d.event&&(d.event="slidechange slide"),s.element.off(".sliderFloat").on(d.event+".sliderFloat",function(i,l){var s="array"===e.type(l.value)?l.value:[l.value],a=d.formatLabel(u(s)[0]);e(l.handle).find(".ui-slider-tip").html(a)})}else"destroy"===i?s.element.off(".sliderFloat").removeClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove():"refresh"===i&&s.element.slider("float",s.element.data("float-options"));function u(i){var n=[],r=e.map(i,function(e){return Math.ceil((e-a)/s.options.step)});if("array"===e.type(d.labels))for(l=0;l<i.length;l++)n[l]=d.labels[r[l]]||i[l];else if("object"===e.type(d.labels))for(l=0;l<i.length;l++)i[l]===a?n[l]=d.labels.first||a:i[l]===t?n[l]=d.labels.last||t:"array"===e.type(d.labels.rest)?n[l]=d.labels.rest[r[l]-1]||i[l]:n[l]=i[l];else for(l=0;l<i.length;l++)n[l]=i[l];return n}}};e.extend(!0,e.ui.slider.prototype,i)}(jQuery);