$(document).ready(function(){jQuery.event.props.push("dataTransfer");var e=-40,l=0,o=[];function i(){return $("#loading-bar .loading-color").css({width:"0%"}),$("#loading").css({display:"none"}),$("#loading-content").html(" "),$("#upload-button").hide(),$("#dropped-files > .image").remove(),$("#extra-files #file-list li").remove(),$("#extra-files").hide(),$("#uploaded-holder").hide(),o.length=0,e=-40,!1}if($("#drop-files").bind("drop",function(i){var a=i.dataTransfer.files;$("#uploaded-holder").show(),$("#drop-files").hide(),$.each(a,function(i,n){if(!a[i].type.match("image.*"))return 0==l?($("#drop-files").html("Hey! Images only"),++l):1==l?($("#drop-files").html("Stop it! Images only!"),++l):2==l?($("#drop-files").html("Can't you read?! Images only!"),++l):3==l&&($("#drop-files").html("Fine! Keep dropping non-images."),l=0),!1;if($("#dropped-files > .image").length<5){var d=(220+40*$("#dropped-files > .image").length)/2-20;$("#upload-button").css({left:d+"px",display:"block"})}var t,s=new FileReader;s.onload=(t=a[i],function(l){o.push({name:t.name,value:this.result}),e+=40;var i=this.result;1==o.length?$("#upload-button span").html("1 file to be uploaded"):$("#upload-button span").html(o.length+" files to be uploaded"),$("#dropped-files > .image").length<5?$("#dropped-files").append('<div class="image" style="left: '+e+"px; background: url("+i+'); background-size: cover;"> </div>'):($("#extra-files .number").html("+"+($("#file-list li").length+1)),$("#extra-files").show(),$("#extra-files #file-list ul").append("<li>"+t.name+"</li>"))}),s.readAsDataURL(n)})}),$("#upload-button .upload").click(function(){$("#loading").show();var e=100/o.length,l=0,a=0;return $("#loading-content").html("Uploading "+o[0].name),$.each(o,function(n,d){$.post("upload.php",o[n],function(d){var t=o[n].name;++l,$("#loading-bar .loading-color").css({width:e*l+"%"}),e*l==100?($("#loading-content").html("Uploading Complete!"),setTimeout(i,500)):e*l<100&&$("#loading-content").html("Uploading "+t);var s=d.split(":");if("uploaded successfully"==s[1]){var r='<li><a href="images/'+s[0]+'">'+t+"</a> "+s[1]+"</li>";$("#uploaded-files").append('<li><a href="images/'+s[0]+'">'+t+"</a> "+s[1]+"</li>"),a=0==window.localStorage.length?0:window.localStorage.length,window.localStorage.setItem(a,r)}else $("#uploaded-files").append('<li><a href="images/'+d+". File Name: "+o[n].name+"</li>")})}),!1}),$("#drop-files").bind("dragenter",function(){return $(this).css({"box-shadow":"inset 0px 0px 20px rgba(0, 0, 0, 0.1)",border:"1px dashed #bb2b2b"}),!1}),$("#drop-files").bind("drop",function(){return $(this).css({"box-shadow":"none",border:"1px solid rgba(0,0,0,0.2)"}),!1}),$("#extra-files .number").toggle(function(){$("#file-list").show()},function(){$("#file-list").hide()}),$("#dropped-files #upload-button .delete").click(i),window.localStorage.length>0){$("#uploaded-files").show();for(var a=0;a<window.localStorage.length;a++){var n=window.localStorage.key(a),d=window.localStorage[n];void 0==d&&""==d||$("#uploaded-files").append(d)}}else $("#uploaded-files").hide(),$("#drop-files").show()});